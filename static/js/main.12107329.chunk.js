(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){e.exports=n.p+"static/media/yikatong-logo-sm.e302ab8c.png"},115:function(e,t,n){e.exports=n.p+"static/media/location-icon.2c1ce28d.svg"},118:function(e,t,n){e.exports=n(229)},203:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),i=n.n(c),o=n(56),s=n(27),l=n(104),u=n(105);var d,m=n(33),h=n(15),p=n.n(h),f=n(28),v=n(10),E=n(11),g=n(74),y=n.n(g),b=function(){function e(){var t=this;Object(v.a)(this,e),this.keywordFilter=function(e,t){return e.filter(function(e){return e.name.indexOf(t)>-1||e.area_name.indexOf(t)>-1})},this.areaFilter=function(e,t){return t.length?e.filter(function(e){return t.indexOf(e.area_id)>-1}):e},this.momentFilter=function(e,n,a){return n||a?e.filter(function(e){var r=e.periods,c=void 0===r?[]:r;if(!e.dates)return!0;var i=!1,o=!0,s=!1,l=void 0;try{for(var u,d=c[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var m=u.value;if(t.isDateOverLaps(n,a,m)){i=!0;break}}}catch(h){s=!0,l=h}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}return i}):e},this.filterItems=function(e,n){var a=e.slice();return n.keyword&&(a=t.keywordFilter(a,n.keyword)),n.areas&&n.areas.length&&(a=t.areaFilter(a,n.areas)),n.start&&n.end&&(a=t.momentFilter(a,n.start,n.end)),a}}return Object(E.a)(e,[{key:"isDateOverLaps",value:function(e,t,n){var a=y()(n[0],"YYYY.M.D"),r=y()(n[1],"YYYY.M.D");return!(!a.isSameOrBefore(t)||!r.isSameOrAfter(e))}}]),e}(),O=n(19),S=n(18),j=n(20),k=n(106),w=n(107),N=n.n(w),C=new(function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"getAreas",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios("get","/json/areas.json");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getScenics",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios("get","/json/scenics.json");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}]),t}(function(){function e(){Object(v.a)(this,e)}return Object(E.a)(e,[{key:"axios",value:function(e,t,n){return new Promise(function(a,r){"object"!==typeof n&&(n={});var c;c=Object(k.a)({method:e,url:t,baseURL:"/",timeout:3e4,params:null,data:null,headers:null,withCredentials:!0,validateStatus:function(e){return e>=200&&e<300}},n),N.a.request(c).then(function(e){a("object"===typeof e.data?e.data:JSON.parse(e.data))},function(e){e.response?r(e.response.data):r(e)})})}}]),e}())),R=function(e){return{type:"HOME_SET_FILTERING_STATE",payload:e}},x={fetchAreas:function(){return function(){var e=Object(f.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAreas();case 2:n=e.sent,t({type:"HOME_SET_YIKATONG_AREAS",payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},fetchScenics:function(){return function(){var e=Object(f.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getScenics();case 2:n=(n=e.sent).map(function(e){e.periods=[];for(var t=0,n=e.dates.split("-");t<n.length;)n[t]&&n[t+1]&&e.periods.push([n[t],n[t+1]]),t+=2;return e}),t({type:"HOME_SET_YIKATONG_SCENICS",payload:n});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},setLoading:R,applyFilters:function(e){return function(t,n){var a=n().homeStore.scenics;t(R(!0)),setTimeout(function(){var n=(new b).filterItems(a,e);t({type:"HOME_SET_FILTERED_SCENICS",payload:n}),t(R(!1))},1e3)}}},I=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,r=t[a.type];return r?r(n,a):n}}({title:"",areas:[],scenics:[],filteredScenics:[],isLoading:!1},(d={},Object(m.a)(d,"HOME_SET_YIKATONG_SCENICS",function(e,t){var n=t.payload;return Object.assign({},e,{scenics:n})}),Object(m.a)(d,"HOME_SET_YIKATONG_AREAS",function(e,t){var n=t.payload;return Object.assign({},e,{areas:n})}),Object(m.a)(d,"HOME_SET_FILTERED_SCENICS",function(e,t){var n=t.payload;return Object.assign({},e,{filteredScenics:n})}),Object(m.a)(d,"HOME_SET_FILTERING_STATE",function(e,t){var n=t.payload;return Object.assign({},e,{isLoading:n})}),d)),D=Object(u.createLogger)(),A=Object(s.d)(Object(s.c)({homeStore:I}),Object(s.a)(l.a,D)),_=n(116),L=n(29),T=(n(147),n(108)),F=n.n(T),M=(n(95),n(40)),B=n.n(M),H=(n(194),n(110)),Y=n.n(H),z=(n(199),n(111)),G=n.n(z),W=(n(99),n(72)),K=n.n(W),J=n(112),P=n.n(J),q=(n(203),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).autoFocusInst=void 0,n.state={},n}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.autoFocusInst.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.onRightClick,c=t.onSearch;return r.a.createElement("div",{className:"headerNav"},r.a.createElement(G.a,{mode:"light",icon:r.a.createElement("img",{className:"brand",src:P.a,alt:"logo"}),rightContent:[r.a.createElement(K.a,{key:"1",type:"ellipsis",onClick:a})]},n),r.a.createElement(Y.a,{placeholder:"\u81ea\u52a8\u83b7\u53d6\u5149\u6807",ref:function(t){return e.autoFocusInst=t},onSubmit:c}))}}]),t}(r.a.Component)),U=(n(204),n(113)),$=n.n(U),Q=(n(100),n(41)),V=n.n(Q),X=(n(207),n(75)),Z=n.n(X),ee=(n(96),n(46)),te=n.n(ee),ne=(n(224),function(e){var t=e.options,n=e.checkedCodes,a=e.onChange;return r.a.createElement("div",{className:"btn-check-group"},r.a.createElement(V.a,{inline:!0,key:"nolimit",type:n.length?"ghost":"primary",size:"small",onClick:function(){return a([])}},"\u4e0d\u9650"),t.map(function(e){var t=e.code,c=e.name,i=n.includes(t);return r.a.createElement(V.a,{inline:!0,key:t,type:i?"primary":"ghost",size:"small",className:i?"checked":"",onClick:function(){!function(e,t){var r=n.slice();t?r.push(e):r=r.filter(function(t){return e!==t}),a(r)}(t,!i)}},c)}))}),ae=(n(225),Date.now()),re=new Date(ae),ce=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).onOpenChange=function(){n.setState({open:!n.state.open})},n.handleAreaChange=function(e){n.setState({checkedAreaIds:e})},n.handleOk=function(){n.setState({open:!1});var e=n.state,t=e.checkedAreaIds,a=e.startDate,r=e.endDate;n.props.applyFilters({areas:t,start:a,end:r})},n.handleReset=function(){n.setState({checkedAreaIds:[],startDate:void 0,endDate:void 0})},n.renderContent=function(){var e=n.props.areas,t=n.state.checkedAreaIds;return r.a.createElement("div",{className:"sidebar-content"},r.a.createElement("div",{className:"filters"},r.a.createElement("p",{className:"sub-title"},"\u9009\u62e9\u533a\u57df"),r.a.createElement("div",{className:"areas-list"},r.a.createElement(ne,{options:e.map(function(e){return{code:e.id,name:e.name}}),checkedCodes:t,onChange:n.handleAreaChange})),r.a.createElement("p",{className:"sub-title"},"\u65f6\u95f4\u8303\u56f4"),r.a.createElement("div",{className:"period"},r.a.createElement(te.a,{className:"date-picker-list",style:{backgroundColor:"white"}},r.a.createElement(Z.a,{mode:"date",title:"\u5f00\u59cb\u65e5\u671f",extra:"Optional",value:n.state.startDate,onChange:function(e){return n.setState({startDate:e})}},r.a.createElement(te.a.Item,{arrow:"horizontal"},"\u8d77\u59cb")),r.a.createElement(Z.a,{mode:"date",title:"\u7ed3\u675f\u65e5\u671f",extra:"Optional",value:n.state.endDate,onChange:function(e){return n.setState({endDate:e})}},r.a.createElement(te.a.Item,{arrow:"horizontal"},"\u622a\u6b62"))))),r.a.createElement("div",{className:"btn-groups"},r.a.createElement(V.a,{inline:!0,style:{marginRight:"16px"},onClick:n.handleReset},"\u91cd\u7f6e"),r.a.createElement(V.a,{type:"primary",inline:!0,onClick:n.handleOk},"\u786e\u8ba4")))},n.state={open:!1,checkedAreaIds:[],startDate:re,endDate:re},n}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement($.a,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},enableDragHandle:!0,contentStyle:{color:"#A6A6A6",textAlign:"center"},sidebar:this.renderContent(),open:this.state.open,position:"right",onOpenChange:this.onOpenChange},e)}}]),t}(r.a.Component),ie=n(115),oe=n.n(ie),se=(n(226),function(e){return r.a.createElement("div",{className:"xui-list"},e.children)});se.Item=function(e){return r.a.createElement("div",{className:"xui-list-item"},r.a.createElement("div",{className:"item-meta"},r.a.createElement("span",{className:"icon-id"},e.id),r.a.createElement("h4",{className:"meta-title"},e.name),r.a.createElement("span",{className:"area"},e.area_name),r.a.createElement("img",{className:"location",src:oe.a,alt:"case1"})),r.a.createElement("div",{className:"item-content"},r.a.createElement("div",{className:"meta-line"},r.a.createElement("div",{className:"time"},"\u65f6\u95f4\u6bb5\uff1a",e.dates),r.a.createElement("div",{className:"limit"},e.limit_type)),r.a.createElement("div",{className:"meta-line"},r.a.createElement("div",{className:"price"},"\u7968\u4ef7\uff1a",e.price,"\u5143"),r.a.createElement("div",{className:"level"},"A\u7ea7\uff1a",e.level?e.level:"\u65e0")),r.a.createElement("p",{className:"description"},"\u7279\u522b\u8bf4\u660e: ",e.notice)))};var le=se,ue=(n(227),10);function de(e){return a.createElement("div",{className:"am-list-body my-body"},a.createElement("span",{style:{display:"none"}},"you can custom body wrap element"),e.children)}var me=function(e){function t(e){var n;Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).lv=void 0,n.sideBarRef=void 0,n.openSideBar=function(){n.sideBarRef&&n.sideBarRef.current.onOpenChange()},n.handleSearch=function(e){n.props.actions.applyFilters({keyword:e})},n.renderRow=function(e,t,n){return a.createElement("div",{key:n,className:"area-item"},a.createElement(le.Item,e))},n.onEndReached=function(){console.log("fire onEndReached");var e=n.state,t=e.isLoading,a=e.pageIndex,r=e.scenics.length>a*ue;!t&&r&&setTimeout(function(){n.setState({isLoading:!1,pageIndex:a+1})},800)},n.sideBarRef=a.createRef(),n.lv=a.createRef();var r=new B.a.DataSource({rowHasChanged:function(e,t){return console.log("diff:",e,t),e!==t}});return n.state={scenics:[],dataSource:r,keyword:"",isLoading:!1,pageIndex:1,height:300},n}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actions.fetchScenics();case 2:return e.next=4,this.props.actions.fetchAreas();case 4:this.props.actions.applyFilters({}),t=0,null!==(n=this.lv?i.a.findDOMNode(this.lv.current):null)&&(t=n.parentNode?n.parentNode.offsetTop:0),a=document.documentElement.clientHeight-t,this.setState({height:a});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){var t=e.scenics;this.setState({scenics:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.scenics,r=t.dataSource,c=t.pageIndex,i=t.height,o=this.props,s=o.isLoading,l=o.actions,u=c*ue<n.length?n.slice(0,c*ue):n,d=u.length?r.cloneWithRows(u):r;return a.createElement("div",{className:"page-home"},a.createElement(ce,{title:"\u641c\u7d22",ref:this.sideBarRef,areas:this.props.areas,applyFilters:l.applyFilters},a.createElement(q,{title:"\u4eac\u6d25\u5180\u4e00\u5361\u901a",onRightClick:this.openSideBar,onSearch:this.handleSearch}),a.createElement("div",{className:"page-content"},a.createElement(B.a,{ref:this.lv,style:{height:i,overflow:"auto"},dataSource:d,renderRow:this.renderRow,className:"am-list area-list xui-list",pageSize:5,onEndReached:this.onEndReached,onEndReachedThreshold:20,renderBodyComponent:function(){return a.createElement(de,null)},onScroll:function(){console.log("scroll")},renderFooter:function(){return a.createElement("div",{style:{padding:30,textAlign:"center"}},e.state.isLoading?"Loading...":"Loaded")}}))),a.createElement(F.a,{toast:!0,animating:s}))}}]),t}(a.Component),he=Object(o.b)(function(e,t){var n=e.homeStore;return{title:"",areas:n.areas,scenics:n.filteredScenics,isLoading:n.isLoading}},function(e){return{actions:Object(s.b)(x,e)}})(me),pe=20,fe=0;function ve(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],n=0;n<pe;n++){var a=e*pe+n;t.push("row - ".concat(a))}return t}var Ee=function(e){return r.a.createElement("table",{className:"my-section-body"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"table title"))),r.a.createElement("tbody",null,e.children))},ge=function(e){function t(e){var n;Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).onEndReached=function(e){console.log("fire onEndReached"),n.state.isLoading&&!n.state.hasMore||(console.log("reach end",e),n.setState({isLoading:!0}),setTimeout(function(){n.rData=n.rData.concat(ve(++fe)),n.setState({isLoading:!1})},1e3))};var a=new B.a.DataSource({rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:a,isLoading:!0},n}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.rData=ve(),e.setState({isLoading:!1})},600)}},{key:"render",value:function(){var e=this,t=this.rData?this.state.dataSource.cloneWithRows(this.rData):this.state.dataSource;return r.a.createElement("div",null,r.a.createElement(B.a,{ref:function(t){return e.lv=t},dataSource:t,useBodyScroll:!0,renderHeader:function(){return r.a.createElement("div",{style:{padding:30}},"\u8bbe\u7f6e\u4e86`useBodyScroll`")},renderFooter:function(){return r.a.createElement("div",{style:{padding:30}},e.state.isLoading?"loading...":"loaded")},renderBodyComponent:function(){return r.a.createElement("div",{className:"for-body-demo"})},renderSectionBodyWrapper:function(e){return r.a.createElement(Ee,{key:e})},renderRow:function(e){return r.a.createElement("div",{style:{height:50}},r.a.createElement("span",null,e," Let me keep typing here so it wraps at least one line."))},onEndReached:this.onEndReached,onEndReachedThreshold:10,pageSize:10}))}}]),t}(r.a.Component),ye=function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement(_.a,null,r.a.createElement(L.c,null,r.a.createElement(L.a,{path:"/",exact:!0,component:he}),r.a.createElement(L.a,{path:"/test",exact:!0,component:ge})))}}]),t}(r.a.Component),be=function(){return r.a.createElement(o.a,{store:A},r.a.createElement(ye,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[118,1,2]]]);
//# sourceMappingURL=main.12107329.chunk.js.map