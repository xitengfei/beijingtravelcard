(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,n){e.exports=n.p+"static/media/yikatong-logo-sm.e302ab8c.png"},125:function(e,t,n){e.exports=n.p+"static/media/location-icon.2c1ce28d.svg"},127:function(e,t,n){e.exports=n(250)},216:function(e,t,n){},222:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),o=n(43),s=n(27),l=n(113),u=n(114);var d,h=n(34),m=n(18),p=n.n(m),f=n(28),v=n(10),E=n(11),g=n(82),y=n.n(g),b=function(){function e(){var t=this;Object(v.a)(this,e),this.keywordFilter=function(e,t){return e.filter(function(e){return e.name.indexOf(t)>-1||e.area.indexOf(t)>-1})},this.areaFilter=function(e,t){return t.length?e.filter(function(e){return t.indexOf(e.area)>-1}):e},this.momentFilter=function(e,n,a){return n||a?e.filter(function(e){var r=e.periods,c=void 0===r?[]:r;if(!c.length)return!0;var i=!1,o=!0,s=!1,l=void 0;try{for(var u,d=c[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;if(t.isDateOverLaps(n,a,h)){i=!0;break}}}catch(m){s=!0,l=m}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}return i}):e},this.filterItems=function(e,n){var a=e.slice();return n.keyword&&(a=t.keywordFilter(a,n.keyword)),n.areas&&n.areas.length&&(a=t.areaFilter(a,n.areas)),n.start&&n.end&&(a=t.momentFilter(a,n.start,n.end)),a}}return Object(E.a)(e,[{key:"isDateOverLaps",value:function(e,t,n){var a=y()(n[0],"YYYY.M.D"),r=y()(n[1],"YYYY.M.D");return!(!a.isSameOrBefore(t)||!r.isSameOrAfter(e))}}]),e}(),O=n(13),S=n(12),k=n(14),j=n(115),w=n(116),N=n.n(w),C=new(function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"getAreas",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios("get","/json/areas.json");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getScenics",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios("get","/json/scenics-2019.json");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}]),t}(function(){function e(){Object(v.a)(this,e)}return Object(E.a)(e,[{key:"axios",value:function(e,t,n){return new Promise(function(a,r){"object"!==typeof n&&(n={});var c;c=Object(j.a)({method:e,url:t,baseURL:"/",timeout:3e4,params:null,data:null,headers:null,withCredentials:!0,validateStatus:function(e){return e>=200&&e<300}},n),N.a.request(c).then(function(e){a("object"===typeof e.data?e.data:JSON.parse(e.data))},function(e){e.response?r(e.response.data):r(e)})})}}]),e}())),x=function(e){return{type:"HOME_SET_FILTERING_STATE",payload:e}},R={fetchAreas:function(){return function(){var e=Object(f.a)(p.a.mark(function e(t,n){var a,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),!(r=a.homeStore).areas.length){e.next=3;break}return e.abrupt("return",r.areas);case 3:return e.next=5,C.getAreas();case 5:c=e.sent,t({type:"HOME_SET_YIKATONG_AREAS",payload:c});case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},fetchScenics:function(){return function(){var e=Object(f.a)(p.a.mark(function e(t,n){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=n().homeStore.scenics).length){e.next=3;break}return e.abrupt("return",a);case 3:return e.next=5,C.getScenics();case 5:return r=(r=e.sent).map(function(e,t){e.id=t+1+"",e.periods=[],e.dates=e.dates||[];for(var n=e.dates,a=0;a<n.length;)n[a]&&n[a+1]&&e.periods.push([n[a],n[a+1]]),a+=2;return e}),e.abrupt("return",t({type:"HOME_SET_YIKATONG_SCENICS",payload:r}));case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},setLoading:x,applyFilters:function(e){return function(t,n){var a=n().homeStore.scenics;t(x(!0)),setTimeout(function(){var n=(new b).filterItems(a,e);t({type:"HOME_SET_FILTERED_SCENICS",payload:n}),t(x(!1))},1e3)}}},I=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,r=t[a.type];return r?r(n,a):n}}({title:"",areas:[],scenics:[],filteredScenics:[],isLoading:!1},(d={},Object(h.a)(d,"HOME_SET_YIKATONG_SCENICS",function(e,t){var n=t.payload;return Object.assign({},e,{scenics:n})}),Object(h.a)(d,"HOME_SET_YIKATONG_AREAS",function(e,t){var n=t.payload;return Object.assign({},e,{areas:n})}),Object(h.a)(d,"HOME_SET_FILTERED_SCENICS",function(e,t){var n=t.payload;return Object.assign({},e,{filteredScenics:n})}),Object(h.a)(d,"HOME_SET_FILTERING_STATE",function(e,t){var n=t.payload;return Object.assign({},e,{isLoading:n})}),d)),D=Object(u.createLogger)(),L=Object(s.d)(Object(s.c)({homeStore:I}),Object(s.a)(l.a,D)),A=n(62),T=n(29),_=(n(156),n(117)),F=n.n(_),M=(n(103),n(44)),B=n.n(M),H=(n(57),n(33)),Y=n.n(H),W=(n(106),n(61)),z=n.n(W),G=(n(206),n(119)),V=n.n(G),K=(n(211),n(121)),P=n.n(K),J=(n(216),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).autoFocusInst=void 0,n.handleSearch=function(e){n.setState({keyword:e}),n.props.onSearch(e)},n.state={keyword:e.keyword},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.visible&&!this.props.visible&&(console.log("kk",this.autoFocusInst),this.autoFocusInst&&this.autoFocusInst.focus()),this.setState({keyword:e.keyword})}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.placeholder,a=e.onCancel;return r.a.createElement(V.a,{className:"search-modal",visible:t,transparent:!0,maskClosable:!1,footer:[]},r.a.createElement(P.a,{placeholder:n,defaultValue:this.props.keyword,ref:function(e){return e&&e.focus()},showCancelButton:!0,onSubmit:this.handleSearch,onCancel:a}))}}]),t}(r.a.Component)),q=(n(217),n(83)),U=n.n(q),X=U.a.Item,$=function(e){return r.a.createElement(U.a,{overlay:[r.a.createElement(X,{key:"2019-general"},"2019\u7248\u666f\u533a\u76ee\u5f55"),r.a.createElement(X,{key:"2020-general"},"2020\u666e\u901a\u7248\u666f\u533a\u76ee\u5f55"),r.a.createElement(X,{key:"2020-union"},"2020\u8054\u5408\u5361\u666f\u533a\u76ee\u5f55")],align:{overflow:{adjustY:0,adjustX:0}}},r.a.createElement("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"}},r.a.createElement(Y.a,{type:"ellipsis"})))},Q=n(123),Z=n.n(Q),ee=(n(222),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).handleSearch=function(e){n.props.onSearch(e),n.setState({searchVisible:!1,keyword:e})},n.handleCancel=function(){n.setState({searchVisible:!1})},n.handleSearchClick=function(){n.setState({searchVisible:!0})},n.handleMenuSelect=function(e){console.log("handleMenuSelect",e)},n.state={searchVisible:!1,keyword:""},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.onRightClick,a=this.state,c=a.searchVisible,i=a.keyword;return r.a.createElement("div",{className:"headerNav"},r.a.createElement(z.a,{mode:"light",icon:r.a.createElement("img",{className:"brand",src:Z.a,alt:"logo"}),rightContent:r.a.createElement($,{onSelect:this.handleMenuSelect})},t),r.a.createElement("div",{className:"search-bar"},r.a.createElement("div",{className:"input-container",onClick:this.handleSearchClick},r.a.createElement("div",{className:"input"},r.a.createElement(Y.a,{type:"search"}),i?r.a.createElement("span",null,i):r.a.createElement("span",{className:"placeholder"},"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22\u666f\u533a"))),r.a.createElement("div",{className:"filter-trigger",onClick:n},r.a.createElement("span",null,"\u7b5b\u9009"),r.a.createElement("span",{className:"iconfont icon-filter"}))),r.a.createElement(J,{visible:c,keyword:i,onSearch:this.handleSearch,onCancel:this.handleCancel,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22\u666f\u533a"}))}}]),t}(r.a.Component)),te=(n(223),n(124)),ne=n.n(te),ae=(n(109),n(45)),re=n.n(ae),ce=(n(226),n(84)),ie=n.n(ce),oe=(n(104),n(50)),se=n.n(oe),le=(n(243),function(e){var t=e.options,n=e.checkedCodes,a=e.onChange;return r.a.createElement("div",{className:"btn-check-group"},r.a.createElement(re.a,{inline:!0,key:"nolimit",type:n.length?"ghost":"primary",size:"small",onClick:function(){return a([])}},"\u4e0d\u9650"),t.map(function(e){var t=e.code,c=e.name,i=n.includes(t);return r.a.createElement(re.a,{inline:!0,key:t,type:i?"primary":"ghost",size:"small",className:i?"checked":"",onClick:function(){!function(e,t){var r=n.slice();t?r.push(e):r=r.filter(function(t){return e!==t}),a(r)}(t,!i)}},c)}))}),ue=(n(244),Date.now()),de=new Date(ue),he=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).onOpenChange=function(){n.setState({open:!n.state.open})},n.handleAreaChange=function(e){n.setState({checkedAreaIds:e})},n.handleOk=function(){n.setState({open:!1});var e=n.state,t=e.checkedAreaIds,a=e.startDate,r=e.endDate;n.props.applyFilters({areas:t,start:a,end:r})},n.handleReset=function(){n.setState({checkedAreaIds:[],startDate:void 0,endDate:void 0})},n.renderContent=function(){var e=n.props.areas,t=n.state.checkedAreaIds,a=document.documentElement.clientWidth,c=Math.min(a-25,500);return r.a.createElement("div",{className:"sidebar-content",style:{width:c}},r.a.createElement("div",{className:"filters"},r.a.createElement("p",{className:"sub-title"},"\u9009\u62e9\u533a\u57df"),r.a.createElement("div",{className:"areas-list"},r.a.createElement(le,{options:e.map(function(e){return{code:e.name,name:e.name}}),checkedCodes:t,onChange:n.handleAreaChange})),r.a.createElement("p",{className:"sub-title"},"\u65f6\u95f4\u8303\u56f4"),r.a.createElement("div",{className:"period"},r.a.createElement(se.a,{className:"date-picker-list",style:{backgroundColor:"white"}},r.a.createElement(ie.a,{mode:"date",title:"\u5f00\u59cb\u65e5\u671f",extra:"Optional",value:n.state.startDate,onChange:function(e){return n.setState({startDate:e})}},r.a.createElement(se.a.Item,{arrow:"horizontal"},"\u8d77\u59cb")),r.a.createElement(ie.a,{mode:"date",title:"\u7ed3\u675f\u65e5\u671f",extra:"Optional",value:n.state.endDate,onChange:function(e){return n.setState({endDate:e})}},r.a.createElement(se.a.Item,{arrow:"horizontal"},"\u622a\u6b62"))))),r.a.createElement("div",{className:"btn-groups"},r.a.createElement(re.a,{inline:!0,style:{marginRight:"16px"},onClick:n.handleReset},"\u91cd\u7f6e"),r.a.createElement(re.a,{type:"primary",inline:!0,onClick:n.handleOk},"\u786e\u8ba4")))},n.state={open:!1,checkedAreaIds:[],startDate:de,endDate:de},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement(ne.a,{className:"my-drawer",style:{minHeight:document.documentElement.clientHeight},enableDragHandle:!0,contentStyle:{color:"#A6A6A6",textAlign:"center"},sidebar:this.renderContent(),open:this.state.open,position:"right",onOpenChange:this.onOpenChange},e)}}]),t}(r.a.Component),me=n(125),pe=n.n(me),fe=(n(245),function(e){return r.a.createElement("div",{className:"xui-list"},e.children)});fe.Item=function(e){var t=2===e.dates.length?e.dates.join(" - "):"",n=!e.link;return r.a.createElement("div",{className:"xui-list-item ".concat(n?"isover":"")},r.a.createElement("div",{className:"item-meta"},r.a.createElement("span",{className:"icon-id"},e.id),r.a.createElement("h4",{className:"meta-title"},e.link?r.a.createElement(A.b,{to:"/scenic/".concat(e.id)},e.name):e.name),r.a.createElement("span",{className:"area"},e.area||"\u65b0\u589e\u666f\u533a"),r.a.createElement("img",{className:"location",src:pe.a,alt:"case1"})),r.a.createElement("div",{className:"item-content"},r.a.createElement("div",{className:"meta-line"},r.a.createElement("div",{className:"time"},"\u65f6\u95f4\u6bb5\uff1a",t),r.a.createElement("div",{className:"limit"},e.limit)),r.a.createElement("div",{className:"meta-line"},r.a.createElement("div",{className:"price"},"\u7968\u4ef7\uff1a",e.price,"\u5143"),r.a.createElement("div",{className:"level"},"A\u7ea7\uff1a",e.level?e.level:"\u65e0")),r.a.createElement("p",{className:"description"},"\u7279\u522b\u8bf4\u660e: ",e.notice)))};var ve=fe,Ee=(n(247),10);function ge(e){return a.createElement("div",{className:"am-list-body my-body"},a.createElement("span",{style:{display:"none"}},"you can custom body wrap element"),e.children)}var ye=function(e){function t(e){var n;Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).lv=void 0,n.sideBarRef=void 0,n.openSideBar=function(){n.sideBarRef&&n.sideBarRef.current.onOpenChange()},n.handleSearch=function(e){n.props.actions.applyFilters({keyword:e})},n.renderRow=function(e,t,n){return a.createElement("div",{key:n,className:"area-item"},a.createElement(ve.Item,e))},n.onEndReached=function(){console.log("fire onEndReached");var e=n.state,t=e.isLoading,a=e.pageIndex,r=e.scenics.length>a*Ee;!t&&r&&setTimeout(function(){n.setState({isLoading:!1,pageIndex:a+1})},800)},n.sideBarRef=a.createRef(),n.lv=a.createRef();var r=new B.a.DataSource({rowHasChanged:function(e,t){return e!==t}});return n.state={scenics:e.scenics,dataSource:r,keyword:"",isLoading:!1,pageIndex:1,height:300},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.actions,e.next=3,t.fetchScenics();case 3:return e.next=5,t.fetchAreas();case 5:n=0,null!==(a=this.lv?i.a.findDOMNode(this.lv.current):null)&&(n=a.parentNode?a.parentNode.offsetTop:0),r=document.documentElement.clientHeight-n,this.setState({height:r});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){var t=e.scenics;e.allScenics.length&&!t.length&&this.props.actions.applyFilters({}),this.setState({scenics:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.scenics,r=t.dataSource,c=t.pageIndex,i=t.height,o=this.props,s=o.isLoading,l=o.actions,u=c*Ee<n.length?n.slice(0,c*Ee):n,d=u.length?r.cloneWithRows(u):r;return a.createElement("div",{className:"page-home"},a.createElement(he,{title:"\u641c\u7d22",ref:this.sideBarRef,areas:this.props.areas,applyFilters:l.applyFilters},a.createElement(ee,{title:"\u4eac\u6d25\u5180\u4e00\u5361\u901a",onRightClick:this.openSideBar,onSearch:this.handleSearch}),a.createElement("div",{className:"page-content"},a.createElement(B.a,{ref:this.lv,style:{height:i,overflow:"auto"},dataSource:d,renderRow:this.renderRow,className:"am-list area-list xui-list",pageSize:5,onEndReached:this.onEndReached,onEndReachedThreshold:20,renderBodyComponent:function(){return a.createElement(ge,null)},onScroll:function(){console.log("scroll")},renderFooter:function(){return a.createElement("div",{style:{padding:30,textAlign:"center"}},e.state.isLoading?"Loading...":"Loaded")}}))),a.createElement(F.a,{toast:!0,animating:s}))}}]),t}(a.Component),be=Object(o.b)(function(e,t){var n=e.homeStore,a=n.areas,r=n.scenics;return{title:"",areas:a,scenics:n.filteredScenics,allScenics:r,isLoading:n.isLoading}},function(e){return{actions:Object(s.b)(R,e)}})(ye),Oe=(n(248),function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).handleLeftClick=function(){n.props.history.push("/")},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.scenic;return e?r.a.createElement("div",{className:"detail-page"},r.a.createElement(z.a,{mode:"light",icon:r.a.createElement(Y.a,{type:"left"}),onLeftClick:this.handleLeftClick},e.name),r.a.createElement("div",{className:"page-content"},r.a.createElement("iframe",{src:e.link,title:e.name,width:"100%",height:"100%"}))):null}}]),t}(r.a.Component)),Se=Object(o.b)(function(e,t){var n=e.homeStore.scenics,a=t.match.params;console.log("ownProps",t);var r=null;return a.id&&n.length&&(r=n.find(function(e){return a.id===e.id})||null),{params:a,scenic:r}},function(e){return e(R.fetchScenics()),{}})(Oe),ke=20,je=0;function we(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],n=0;n<ke;n++){var a=e*ke+n;t.push("row - ".concat(a))}return t}var Ne=function(e){return r.a.createElement("table",{className:"my-section-body"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"table title"))),r.a.createElement("tbody",null,e.children))},Ce=function(e){function t(e){var n;Object(v.a)(this,t),(n=Object(O.a)(this,Object(S.a)(t).call(this,e))).onEndReached=function(e){console.log("fire onEndReached"),n.state.isLoading&&!n.state.hasMore||(console.log("reach end",e),n.setState({isLoading:!0}),setTimeout(function(){n.rData=n.rData.concat(we(++je)),n.setState({isLoading:!1})},1e3))};var a=new B.a.DataSource({rowHasChanged:function(e,t){return e!==t}});return n.state={dataSource:a,isLoading:!0},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.rData=we(),e.setState({isLoading:!1})},600)}},{key:"render",value:function(){var e=this,t=this.rData?this.state.dataSource.cloneWithRows(this.rData):this.state.dataSource;return r.a.createElement("div",null,r.a.createElement(B.a,{ref:function(t){return e.lv=t},dataSource:t,useBodyScroll:!0,renderHeader:function(){return r.a.createElement("div",{style:{padding:30}},"\u8bbe\u7f6e\u4e86`useBodyScroll`")},renderFooter:function(){return r.a.createElement("div",{style:{padding:30}},e.state.isLoading?"loading...":"loaded")},renderBodyComponent:function(){return r.a.createElement("div",{className:"for-body-demo"})},renderSectionBodyWrapper:function(e){return r.a.createElement(Ne,{key:e})},renderRow:function(e){return r.a.createElement("div",{style:{height:50}},r.a.createElement("span",null,e," Let me keep typing here so it wraps at least one line."))},onEndReached:this.onEndReached,onEndReachedThreshold:10,pageSize:10}))}}]),t}(r.a.Component),xe=function(e){function t(){return Object(v.a)(this,t),Object(O.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement(T.c,null,r.a.createElement(T.a,{path:"/",exact:!0,component:be}),r.a.createElement(T.a,{path:"/scenic/:id",component:Se}),r.a.createElement(T.a,{path:"/test",exact:!0,component:Ce})))}}]),t}(r.a.Component),Re=function(){return r.a.createElement(o.a,{store:L},r.a.createElement(xe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[127,1,2]]]);
//# sourceMappingURL=main.217c5d7b.chunk.js.map